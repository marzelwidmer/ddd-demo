apiVersion: skaffold/v2beta16
kind: Config
metadata:
  name: demo-service
build:
  artifacts:
    - image: demo-service
      jib:
        args:
          - -Pjib,integration,contracts,documentation
        type: maven
  tagPolicy:
    sha256: { }

deploy:
  kustomize:
    paths:
      - k8s/installs/minikube

profiles:
  - name: aks
    build:
      artifacts:
        - image: c3smonkey.azurecr.io/demo-service
          jib:
            args:
              - -Pjib,integration,contracts,documentation
              - -Dimage=c3smonkey.azurecr.io/demo-service
    deploy:
      kustomize:
        paths:
          - k8s/installs/aks
